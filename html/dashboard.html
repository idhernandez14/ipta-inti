<!-- dashboard.html - Módulo principal del sistema IPTA-INTI (Dashboard) -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | IPTA-INTI</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="stylesheet" href="../assets/css/dashboard.css">

  <!-- Librería Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- CABECERA -->
  <header class="top-bar">
    <div class="project-header">
      <img src="../assets/img/logo-icon.png" alt="Logo IPTA-INTI" class="logo-icon" style="width: 50px;">
      <h1 class="project-title">IPTA-INTI</h1>
    </div>
    <div style="text-align: right; margin-right: 2rem; font-weight: bold;">
      Usuario: <span id="usuarioHeader"></span> | Rol: <span id="rol"></span>
      <button onclick="cerrarSesion()" class="btn btn-secundario" style="margin-left:1rem;">Cerrar sesión</button>
    </div>
  </header>

  <!-- SIDEBAR -->
  <nav class="sidebar" aria-label="Menú de navegación principal">
    <div class="logo">
      <img src="../assets/img/logo-inti.png" alt="Logo IPTA-INTI" style="width: 60px;">
      <h2>IPTA-INTI</h2>
    </div>
    <ul>
      <li><a href="dashboard.html" class="active">Inicio</a></li>
      <li><a href="clientes.html">Clientes</a></li>
      <li><a href="ventas.html">Ventas</a></li>
      <li><a href="empleados.html">Empleados</a></li>
      <li><a href="proveedores.html">Proveedores</a></li>
      <li><a href="promociones.html">Promociones</a></li>
      <li><a href="productos.html">Productos</a></li>
      <li><a href="inventario.html">Inventario</a></li>
      <li><a href="seguridad.html">Seguridad</a></li>
      <li><a href="../index.html">Salir</a></li>
    </ul>
  </nav>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="main-content">
    <div class="panel" data-role="Administrador" id="dashboardPanel">
      <h2 style="color: var(--color-verde);">Gestión de Dashboard</h2>
      <p><strong>Módulo activo:</strong> Dashboard</p>
      <p>Bienvenido, <strong><span id="usuarioMain"></span></strong>.</p>

      <!-- GRÁFICO VENTAS -->
      <h3 style="color: var(--color-terracota); margin-top: 2rem;">Ventas de la Semana</h3>
      <div id="graficoVentasContainer">
        <canvas id="graficoVentas" height="100"></canvas>
      </div>

      <!-- GRÁFICO STOCK -->
      <h3 style="color: var(--color-dorado); margin-top: 2rem;">Stock de Productos (Top 5)</h3>
      <canvas id="graficoStock" height="100"></canvas>

      <!-- SELECTOR DE TABLAS -->
      <div style="margin-top: 3rem;">
        <label for="seleccionTabla"><strong>Mostrar tabla:</strong></label>
        <select id="seleccionTabla" class="input" onchange="mostrarTablaSeleccionada()">
          <option value="ventas">Ventas</option>
          <option value="reportes">Reportes</option>
        </select>
      </div>

      <!-- TABLA DE VENTAS -->
      <section id="tablaVentas" style="margin-top: 1.5rem;">
        <h3>Tabla de Ventas</h3>
        <table class="tabla" aria-label="Tabla de Ventas">
          <thead style="background: var(--color-verde); color: white;">
            <tr>
              <th>ID</th>
              <th>Fecha</th>
              <th>Total</th>
              <th>Cliente</th>
              <th>Empleado</th>
            </tr>
          </thead>
          <tbody id="datosVentas">
            <!-- Llenado con JS -->
          </tbody>
        </table>
      </section>

      <!-- TABLA DE REPORTES -->
      <section id="tablaReportesTabla" style="margin-top: 2rem; display: none;">
        <h3>Tabla de Reportes</h3>
        <table class="tabla" aria-label="Tabla de Reportes">
          <thead style="background: var(--color-terracota); color: white;">
            <tr>
              <th>ID</th>
              <th>Tipo</th>
              <th>Datos</th>
            </tr>
          </thead>
          <tbody id="datosReportes">
            <!-- Llenado con JS -->
          </tbody>
        </table>
      </section>
    </div>
  </main>

  <!-- PIE DE PÁGINA -->
  <footer class="bottom-bar">
    <p>&copy; 2025 Iván David Hernández - Proyecto IPTA-INTI</p>
    <div class="footer-icons">
      <img src="../assets/img/footer-icon-1.png" alt="Ícono decorativo 1" style="width: 30px;">
      <img src="../assets/img/footer-icon-2.png" alt="Ícono decorativo 2" style="width: 30px;">
    </div>
  </footer>

  <!-- SCRIPTS -->
  <script src="../js/roles.js"></script>
  <script src="../js/dashboard.js"></script>
  <script>
    function mostrarTablaSeleccionada() {
      const seleccion = document.getElementById("seleccionTabla").value;
      document.getElementById("tablaVentas").style.display = (seleccion === "ventas") ? "block" : "none";
      document.getElementById("tablaReportesTabla").style.display = (seleccion === "reportes") ? "block" : "none";
    }

    // Carga nombre del usuario desde localStorage o sesión
    document.addEventListener("DOMContentLoaded", () => {
      const usuario = localStorage.getItem("usuario") || "Usuario";
      document.getElementById("usuarioHeader").textContent = usuario;
      document.getElementById("usuarioMain").textContent = usuario;
    });
  </script>
</body>
</html>
